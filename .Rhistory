getwd()
ActivityLabel<-read.table("UCI_HAR_Dataset/activity_labels.txt", col.names = c("Activity_ID", "Activity_Name"))
Features<-read.table("UCI_HAR_Dataset/features.txt", col.names = c("Feature_ID", "Feature_Name"))
TrainSet<-read.table("UCI_HAR_Dataset/train/x_train.txt", col.names = Features$Feature_Name) ##label columns with descriptive variable names
TrainLabels<-read.table("UCI_HAR_Dataset/train/y_train.txt", col.names="Activity_ID")
TrainSubject<-read.table("UCI_HAR_Dataset/train/subject_train.txt", col.names="Subject")
TestSet<-read.table("UCI_HAR_Dataset/test/x_test.txt", col.names = Features$Feature_Name) ##label columns with descriptive variable names
TestLabels<-read.table("UCI_HAR_Dataset/test/y_test.txt", col.names="Activity_ID")
TestSubject<-read.table("UCI_HAR_Dataset/test/subject_test.txt", col.names="Subject")
##Merge training datasets, add column to label this as training group, then add descriptive Activity Names
TrainData<-cbind(TrainLabels, TrainSubject, Group="Train", TrainSet)
TrainData<-merge(ActivityLabel, TrainData, by="Activity_ID")
##Merge test datasets and add column to label this as test group, then add descriptive Activity Names
TestData<-cbind(TestLabels, TestSubject, Group="Test", TestSet)
TestData<-merge(ActivityLabel, TestData, by="Activity_ID")
TotalData<-rbind(TrainData, TestData)
library(plyr)
library(dplyr)
TotalData<-tbl_df(TotalData)
ColSelect<-grepl("mean",names(TotalData)) | grepl("std",names(TotalData))
ColSelect[1:4]<-"TRUE"
TotalData<-TotalData[ColSelect==T] ##This is the final data set for the first part of the Course Project
write.table(TotalData, file="TotalData.txt", row.name=F) ##write data table to directory
Activity_Subject_Pair <- paste(TotalData$Activity_Name,"_",TotalData$Subject)
TotalDataSummary<-cbind(Activity_Subject_Pair, TotalData)
##Remove cols 2 through 5 as not needed any longer
TotalDataSummary<-select(TotalDataSummary, -(2:5))
TotalDataSummary<-ddply(TotalDataSummary,.(Activity_Subject_Pair),colwise(mean, is.numeric))
##Update column names to add "Mean_" prefix for variables that had a mean calculated
NewNames<-paste("Mean_", colnames(TotalDataSummary[2:80]))
NewNames<-c(colnames(TotalDataSummary[1]),NewNames)
colnames(TotalDataSummary)<-NewNames ## this is the final data set for the second part of the Course Project
write.table(TotalDataSummary, file = "TotalDataSummary.txt", row.name=F) ##write data table to directory
q()
